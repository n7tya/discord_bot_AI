# Discord Bot セットアップガイド

## 🚨 「不明な連携」エラーの解決方法

「不明な連携」と表示される場合、ボットが適切なスコープで招待されていません。以下の手順で修正してください。

## 📋 完全セットアップ手順

### 1. Discord Developer Portal での設定

1. **Discord Developer Portal** にアクセス: https://discord.com/developers/applications
2. あなたのアプリケーションを選択
3. **OAuth2** → **URL Generator** に移動

### 2. 必要なスコープの選択

以下のスコープを**必ず**選択してください：

✅ **SCOPES (必須)**:
- `bot` - ボット機能
- `applications.commands` - スラッシュコマンド（重要！）

✅ **BOT PERMISSIONS (推奨)**:
- `Send Messages` - メッセージ送信
- `Use Slash Commands` - スラッシュコマンド使用
- `Embed Links` - リンクの埋め込み
- `Attach Files` - ファイル添付
- `Read Message History` - メッセージ履歴の読み取り
- `Add Reactions` - リアクション追加

### 3. 招待URLの生成と使用

1. 上記の設定後、画面下部に**Generated URL**が表示されます
2. このURLをコピーしてブラウザで開く
3. ボットを招待したいサーバーを選択
4. 権限を確認して「認証」をクリック

### 4. 既存ボットの再招待（重要）

もしボットが既にサーバーにいる場合：

1. **古いボットをサーバーから削除**
2. 上記の正しいURLで**再招待**
3. または、サーバー設定から「連携」→「ボット」で権限を更新

## 🔧 設定確認方法

### ボットが正しく設定されているかの確認

1. **サーバー設定** → **連携** → **ボット**
2. あなたのボットを選択
3. 「スラッシュコマンド」権限が有効になっているか確認

### コマンドが表示されるかの確認

1. Discordチャットで `/` を入力
2. ボットのコマンドが表示されるか確認
3. 表示されない場合は再招待が必要

## 🎯 正しい招待URL例

```
https://discord.com/api/oauth2/authorize?client_id=YOUR_BOT_CLIENT_ID&permissions=2147483648&scope=bot%20applications.commands
```

**重要**: `YOUR_BOT_CLIENT_ID` を実際のボットのClient IDに置き換えてください。

## ❌ よくある間違い

1. **`applications.commands` スコープの未選択**
   - これがないとスラッシュコマンドが使えません

2. **古い招待URLの使用**
   - 以前作成したURLには新しいスコープが含まれていません

3. **権限不足**
   - ボットに必要な権限が与えられていません

## 🔄 トラブルシューティング

### 「不明な連携」が解決しない場合

1. **ボットを完全に削除**
   - サーバー設定 → 連携 → ボット名をクリック → 削除

2. **新しいURLで再招待**
   - 上記の手順で生成した正しいURLを使用

3. **権限の再確認**
   - サーバー管理権限があることを確認

4. **時間をおいて再試行**
   - Discordの同期に時間がかかる場合があります

## 📞 サポート

問題が解決しない場合：
1. ボットのClient IDを確認
2. 招待URLの再生成
3. サーバー管理者権限の確認

---

**📝 注意**: このガイドに従って設定すれば、スラッシュコマンドが正常に動作するはずです。